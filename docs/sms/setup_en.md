# Super Mario Sunshine Multiworld Setup Guide

## Required Software
- [Latest release of Archipelago Multiworld Suite](https://github.com/ArchipelagoMW/Archipelago/releases). 
- [Dolphin Gamecube/Wii Emulator](https://dolphin-emu.org/)
- Your **Legally** obtained American ISO file, likely named `Super Mario Sunshine (USA).iso`

## Setup process
1. Download and install the latest release of Archipelago Multiworld from the link above.

2. Download and install the latest release of Dolphin Emulator from the link above.

3. Download the APWorld from the [releases](https://github.com/Joshark/archipelago-sms/releases/latest) page and place it in your `custom_worlds` folder located in your Archipelago install director

4. (Optional) If you have Universal Tracker (UT) make sure to place your yaml into your players folder to have access to UT in the SMS Client

## Create a Config (.yaml) File

### What is a config file and why do I need one?

Your config file contains a set of configuration options which provide the generator with information about how it
should generate your game. Each player of a multiworld will provide their own config file. This setup allows each player
to enjoy an experience customized for their taste, and different players in the same multiworld can all have different
options.

### Where do I get a config file?

Run the ArchipelagoLauncher.exe from your Archipelago install and click `Generate Template Options`.
This will produce a `/Players/Templates` folder in your Archipelago install, which contains default config files for 
every game in your `custom_worlds` folder. You can manually edit the config file using a text editor of your choice.

### Verifying your config file

If you would like to validate your config file to make sure it works, you may do so on the
[YAML Validator](/mysterycheck) page.

## Generating a Single-Player Game

1. After modifying your yaml, place it into your Archipelago/player folder
2. Open the Archipelago Launcher and click "Generate". This will create a zip file in Archipelago/output
3. Navigate to the Archipelago website and go to the Host Game page
4. Click upload file and pass it the .zip created in your output folder
5. Click the "Create New Room" link.
6. Download the patch file generated by the website and either double click it to start the patching process
   - Choose your `Super Mario Sunshine (USA).iso` to patch and wait until the SMS Client opens automatically
8. Open Dolphin and from Dolphin, open the generated randomized ISO of Sunshine (Located in the same directory as the patch file).
   - Ensure that "Enable CPU Overclock" and "Emulated Memory Size Override" are both off in your Dolphin settings
9. In the server page, there will be a port number. Copy this port number into the top of your SMSClient. 
   - The field should read `archipelago.gg:<port number>`
10. Once you have loaded into the game, click the `Connect` button at the top of the SMSClient. Once it says you are connected you're free to play, choose a brand new file and start playing!

## Joining a MultiWorld Game

### Setup your randomized ROM

When you join a multiworld game, you will be asked to provide your config file to whoever is hosting. Once that is done,
the host will provide you with a link to the room or the address and port necessary to connect.
If the game is being hosted on the Archipelago website download the patch file for your game through the link there, otherwise you can obtain it from the generated output of the host of the multiworld

### Connect to the client

Open up your SMSClient and connect as per you would in a single player session. Any time you would need to connect to a new game it is necessary to relaunch the client once your game is back on the File Select Screen.

1. Open Dolphin and from Dolphin, open the generated randomized ISO of Sunshine (Located in the same directory as the patch file).
2. Open your SMSClient, making sure to connect only after you are waiting in the File Select. In the server page, there will be a port number. Copy this port number into the top of your SMSClient. 
   - The field should read `archipelago.gg:<port number>`
3. Once you have loaded into the game, the client should log that Dolphin has been connected. Click the `Connect` button
at the top of the SMSClient. If the port number is correct, you are now connected and ready to play!

### Play the game

Remember to be in the File Select screen **BEFORE** connecting in case of starting any new playthroughs as it might send unwanted checks if you connect while in a different save file
